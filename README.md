# ProdSync ç”Ÿäº§é¡¹ç›®ç®¡ç†ç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹
ProdSyncæ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ç”Ÿäº§é¡¹ç›®ç®¡ç†ç³»ç»Ÿï¼Œä¸“ä¸ºå·¥ä¸šç”Ÿäº§ç¯å¢ƒè®¾è®¡ï¼Œæ”¯æŒå¤šè§’è‰²åä½œå’Œä»»åŠ¡ç®¡ç†ã€‚

## æŠ€æœ¯æ ˆ
- **å‰ç«¯**: React 18 + TypeScript + Ant Design
- **åç«¯**: Node.js + Express 
- **æ•°æ®åº“**: SQLite
- **è®¤è¯**: JWT

## ç”¨æˆ·è§’è‰²
- **ç®¡ç†å‘˜ (admin)**: ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™
- **ç”Ÿäº§è°ƒåº¦ (production_scheduler)**: åˆ›å»ºå’Œåˆ†é…ç”Ÿäº§ä»»åŠ¡
- **ç”Ÿäº§æ‰€é¢†å¯¼ (production_leader)**: æ¥æ”¶ä»»åŠ¡ï¼Œåˆ†é…æ‰§è¡Œäººï¼Œç¡®è®¤å®Œæˆ
- **èŒå‘˜ (staff)**: æ‰§è¡Œå…·ä½“ä»»åŠ¡

## åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ŒæˆåŠŸèƒ½
- ç”¨æˆ·ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ã€å¯†ç é‡ç½®ï¼‰
- é¡¹ç›®ç®¡ç†ï¼ˆåˆ›å»ºã€ç¼–è¾‘ã€çŠ¶æ€è·Ÿè¸ªï¼‰
- ä»»åŠ¡ç®¡ç†åŸºç¡€åŠŸèƒ½
- é‡Œç¨‹ç¢‘ç®¡ç†
- å¤šè§’è‰²æƒé™æ§åˆ¶
- ç”¨æˆ·è®¤è¯å’Œæˆæƒ

### ğŸ”„ ä»»åŠ¡ç®¡ç†é‡æ„è¿›å±•ï¼ˆè¿›è¡Œä¸­ï¼‰

#### ç¬¬ä¸€é˜¶æ®µï¼šæ•°æ®åº“ç»“æ„è°ƒæ•´ âœ…
- æ›´æ–° `tasks_v3` è¡¨ç»“æ„
  - æ–°å¢ `parent_task_id` å­—æ®µï¼ˆæ”¯æŒå­ä»»åŠ¡ï¼‰
  - æ–°å¢ `completed_by_leader_at` å­—æ®µï¼ˆç”Ÿäº§æ‰€é¢†å¯¼ç¡®è®¤å®Œæˆæ—¶é—´ï¼‰
  - æ–°å¢ `is_copied_from` å­—æ®µï¼ˆä»»åŠ¡å¤åˆ¶æ¥æºï¼‰
  - ä¿®æ”¹ `executor` å­—æ®µä¸ºå¯é€‰ï¼ˆç”Ÿäº§è°ƒåº¦åˆ›å»ºæ—¶ä¸æŒ‡å®šæ‰§è¡Œäººï¼‰
- åˆ›å»º `task_receipts` è¡¨ï¼ˆä»»åŠ¡å›æ‰§ï¼‰
- å®ç°æ•°æ®åº“è¿ç§»å‡½æ•°

#### ç¬¬äºŒé˜¶æ®µï¼šåç«¯APIé‡æ„ âœ…
- ä¿®æ”¹ä»»åŠ¡åˆ›å»ºé€»è¾‘
  - ä»»åŠ¡åˆ›å»ºæ—¶è‡ªåŠ¨è®¾ç½®å¼€å§‹æ—¶é—´å’ŒIN_PROGRESSçŠ¶æ€
  - ç”Ÿäº§è°ƒåº¦åˆ›å»ºä»»åŠ¡æ—¶åªæŒ‡å®šç”Ÿäº§æ‰€é¢†å¯¼ï¼Œä¸æŒ‡å®šæ‰§è¡Œäºº
- æ›´æ–°æƒé™æ§åˆ¶é€»è¾‘
  - ç”Ÿäº§è°ƒåº¦ä¸èƒ½å®Œæˆä»»åŠ¡ï¼Œåªæœ‰æ‰§è¡Œäººæˆ–ç”Ÿäº§æ‰€é¢†å¯¼å¯ä»¥å®Œæˆ
- æ–°å¢APIæ¥å£ï¼š
  - `POST /api/tasks/:id/subtasks` - åˆ›å»ºå­ä»»åŠ¡
  - `PUT /api/tasks/:id/assign` - åˆ†é…ä»»åŠ¡æ‰§è¡Œäºº
  - `POST /api/tasks/:id/receipt` - æäº¤ä»»åŠ¡å›æ‰§
  - `GET /api/tasks/:id/receipts` - è·å–ä»»åŠ¡å›æ‰§
  - `POST /api/tasks/:id/copy` - å¤åˆ¶ä»»åŠ¡
  - `PUT /api/tasks/:id/complete-by-leader` - ç”Ÿäº§æ‰€é¢†å¯¼ç¡®è®¤å®Œæˆ
  - `GET /api/tasks/:id/subtasks` - è·å–å­ä»»åŠ¡åˆ—è¡¨
  - `GET /api/users/production-leaders` - è·å–ç”Ÿäº§æ‰€é¢†å¯¼åˆ—è¡¨

#### ç¬¬ä¸‰é˜¶æ®µï¼šå‰ç«¯ç•Œé¢é‡æ„ ğŸ”„
- æ›´æ–°ç±»å‹å®šä¹‰ âœ…
  - æ‰©å±•Taskæ¥å£ï¼Œæ·»åŠ æ–°å­—æ®µ
  - æ–°å¢TaskReceiptã€CreateSubtaskRequestç­‰æ¥å£
- æ›´æ–°APIæœåŠ¡ âœ…
  - æ·»åŠ æ–°çš„APIæ–¹æ³•åˆ°taskAPI
- ä¿®æ”¹ä»»åŠ¡åˆ›å»ºè¡¨å• âœ…
  - ç”Ÿäº§æ‰€é¢†å¯¼å­—æ®µæ”¹ä¸ºå¿…é€‰
  - ç§»é™¤æ‰§è¡Œäººå­—æ®µé€‰æ‹©
- é‡æ„æ“ä½œæŒ‰é’® ğŸ”„ï¼ˆè¿›è¡Œä¸­ï¼‰
  - ç§»é™¤"å¼€å§‹ä»»åŠ¡"æŒ‰é’®
  - æ·»åŠ è§’è‰²ç›¸å…³çš„æ“ä½œæŒ‰é’®
  - å¾…å®Œæˆï¼šæ¨¡æ€æ¡†å®ç°å’Œå®Œæ•´åŠŸèƒ½

### ğŸ“‹ é‡æ„éœ€æ±‚è¯¦æƒ…
1. âœ… å–æ¶ˆ"å¼€å§‹ä»»åŠ¡"åŠŸèƒ½ï¼Œä»»åŠ¡åˆ›å»ºæ—¶è‡ªåŠ¨è®°å½•å¼€å§‹æ—¶é—´
2. âœ… ç”Ÿäº§è°ƒåº¦åªèƒ½åˆ›å»ºä»»åŠ¡ï¼Œä¸èƒ½å®Œæˆä»»åŠ¡
3. âœ… ç”Ÿäº§è°ƒåº¦åˆ›å»ºçš„ä»»åŠ¡åªä¸‹å‘ç»™ç”Ÿäº§æ‰€é¢†å¯¼ï¼Œä¸æŒ‡å®šæ‰§è¡Œäºº
4. ğŸ”„ ç”Ÿäº§æ‰€é¢†å¯¼å¯ä»¥æ•´ä½“è½¬å‘æˆ–æ‹†åˆ†æˆå¤šä¸ªå­ä»»åŠ¡ä¸‹å‘ç»™æ‰§è¡Œäºº
5. ğŸ”„ ä»»åŠ¡å®Œæˆé€»è¾‘ï¼šç”Ÿäº§æ‰€é¢†å¯¼ç¡®è®¤å®Œæˆ OR æ‰€æœ‰å­ä»»åŠ¡å®Œæˆ
6. ğŸ”„ æ‰§è¡Œäººå®Œæˆä»»åŠ¡æ—¶éœ€è¦å¡«å†™å›æ‰§å¹¶è®°å½•åˆ°æ•°æ®åº“
7. ğŸ”„ ç”Ÿäº§è°ƒåº¦å¢åŠ å¤åˆ¶ä»»åŠ¡åŠŸèƒ½

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- npm >= 8.0.0

### å®‰è£…å’Œè¿è¡Œ
```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨åç«¯æœåŠ¡å™¨
npm run dev

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd client && npm start
```

### é»˜è®¤ç™»å½•è´¦æˆ·
- ç®¡ç†å‘˜: admin / admin123
- ç”Ÿäº§è°ƒåº¦: scheduler / scheduler123
- ç”Ÿäº§æ‰€é¢†å¯¼: leader / leader123
- èŒå‘˜: staff / staff123

## é¡¹ç›®ç»“æ„
```
ProdSync/
â”œâ”€â”€ client/                 # å‰ç«¯Reactåº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/       # Reactä¸Šä¸‹æ–‡
â”‚   â”‚   â”œâ”€â”€ services/       # APIæœåŠ¡
â”‚   â”‚   â””â”€â”€ types/          # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ server/                 # åç«¯Node.jsåº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ database-v3.js  # æ•°æ®åº“é…ç½®å’Œè¿ç§»
â”‚   â”‚   â”œâ”€â”€ simple-server-v3.js  # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ new-apis.js     # æ–°å¢APIå®ç°
â”‚   â””â”€â”€ data/               # SQLiteæ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ deploy/                 # éƒ¨ç½²ç›¸å…³è„šæœ¬
â””â”€â”€ scripts/                # è¾…åŠ©è„šæœ¬
```

## å½“å‰å¼€å‘çŠ¶æ€
- ä¸»è¦åŠŸèƒ½å·²å®Œæˆ
- ä»»åŠ¡ç®¡ç†é‡æ„è¿›è¡Œä¸­ï¼ˆ70%å®Œæˆï¼‰
- å‰ç«¯ç•Œé¢é‡æ„å¾…å®Œå–„
- éœ€è¦æ·»åŠ å®Œæ•´çš„å­ä»»åŠ¡ç®¡ç†åŠŸèƒ½
- éœ€è¦æ·»åŠ ä»»åŠ¡å›æ‰§ç³»ç»Ÿ
- éœ€è¦æ·»åŠ ä»»åŠ¡å¤åˆ¶åŠŸèƒ½

## ä¸‹ä¸€æ­¥è®¡åˆ’
1. å®Œæˆå‰ç«¯æ¨¡æ€æ¡†å®ç°
2. å®ç°å­ä»»åŠ¡ç®¡ç†ç•Œé¢
3. å®ç°ä»»åŠ¡å›æ‰§å¡«å†™ç•Œé¢
4. å®ç°ä»»åŠ¡å¤åˆ¶åŠŸèƒ½
5. å®Œå–„ç”¨æˆ·ç•Œé¢å’Œäº¤äº’ä½“éªŒ
6. æ·»åŠ å•å…ƒæµ‹è¯•
7. ä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ

## ğŸ“š APIæ–‡æ¡£

### æ–°å¢APIæ¥å£

#### å­ä»»åŠ¡ç®¡ç†
- `POST /api/tasks/:id/subtasks` - åˆ›å»ºå­ä»»åŠ¡
- `GET /api/tasks/:id/subtasks` - è·å–å­ä»»åŠ¡åˆ—è¡¨
- `PUT /api/tasks/:id/assign` - åˆ†é…ä»»åŠ¡æ‰§è¡Œäºº

#### ä»»åŠ¡å›æ‰§
- `POST /api/tasks/:id/receipt` - æäº¤ä»»åŠ¡å›æ‰§
- `GET /api/tasks/:id/receipts` - è·å–ä»»åŠ¡å›æ‰§

#### ä»»åŠ¡æ“ä½œ
- `POST /api/tasks/:id/copy` - å¤åˆ¶ä»»åŠ¡
- `PUT /api/tasks/:id/complete-by-leader` - ç”Ÿäº§æ‰€é¢†å¯¼ç¡®è®¤å®Œæˆ

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
ProdSync/
â”œâ”€â”€ client/                 # Reactå‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/       # Reactä¸Šä¸‹æ–‡
â”‚   â”‚   â”œâ”€â”€ services/       # APIæœåŠ¡
â”‚   â”‚   â””â”€â”€ types/          # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ server/                 # Node.jsåç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ database-v3.js  # æ•°æ®åº“è®¾ç½®
â”‚   â”‚   â””â”€â”€ simple-server-v3.js # æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”œâ”€â”€ deploy/                 # éƒ¨ç½²è„šæœ¬å’Œé…ç½®
â””â”€â”€ scripts/                # è¾…åŠ©è„šæœ¬
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚ 